//========================================================================
//Confirmation Dialog Prompt
//========================================================================
function Confirm(message){var result=confirm(message);result=result?true:false;return result}

//========================================================================
//mooEditor
//========================================================================
var mooEditor=new Class({Implements:[Options],options:{bold:true,underline:true,italic:true,blockquote:true},initialize:function(options){this.setOptions(options);this.Element=$('mooEditor');this.Toolbar=new Element('div',{id:'editor_toolbar'});if(this.Element){this.Toolbar.inject(this.Element.getParent(),'top');if(this.options.bold){this.Bold=new Element('span',{id:'editor_bold'});this.Bold.set('html','BOLD');this.Bold.inject(this.Toolbar);this.Bold.addEvent('click',this.format.pass(['strong'],this))}if(this.options.underline){this.Underline=new Element('span',{id:'editor_underline'});this.Underline.set('html','UNDERLINE');this.Underline.inject(this.Toolbar);this.Underline.addEvent('click',this.format.pass(['u'],this))}if(this.options.italic){this.Italic=new Element('span',{id:'editor_italic'});this.Italic.set('html','ITALIC');this.Italic.inject(this.Toolbar);this.Italic.addEvent('click',this.format.pass(['em'],this))}if(this.options.blockquote){this.Blockquote=new Element('span',{id:'editor_blockquote'});this.Blockquote.set('html','BLOCKQUOTE');this.Blockquote.inject(this.Toolbar);this.Blockquote.addEvent('click',this.format.pass(['blockquote'],this))}}},getSelection:function(ta){var bits=[ta.value,'','',''];if(document.selection){var vs='#$%^%$#';var tr=document.selection.createRange();if(tr.parentElement()!=ta){return null}bits[2]=tr.text;tr.text=vs;var fb=ta.value.split(vs);tr.moveStart('character',-vs.length);tr.text=bits[2];bits[1]=fb[0];bits[3]=fb[1]}else{if(ta.selectionStart==ta.selectionEnd){return null}bits=(new RegExp('([\x00-\xff]{'+ta.selectionStart+'})([\x00-\xff]{'+(ta.selectionEnd-ta.selectionStart)+'})([\x00-\xff]*)')).exec(ta.value)}return bits},matchTags:function(str){str=' '+str+' ';var ot=str.split(/\[[B|U|I].*?\]/i);var ct=str.split(/\[\/[B|U|I].*?\]/i);return ot.length==ct.length},format:function(tag){var bits=this.getSelection(this.Element);if(!this.matchTags(bits[2])){alert('\t\tInvalid Selection\nSelection contains unmatched opening or closing tags.');return}this.Element.value=bits[1]+'<'+tag+'>'+bits[2]+'</'+tag+'>'+bits[3]}});

//========================================================================
//Listen for AJAX requests v3.2 - 10/07/08
//========================================================================
var ajaxListener=new Class({Implements:[Options],options:{link_class:'.ajax',form_class:'.ajax_send',target:'',opacity:0.5,displayOverlay:false,overlayColor:'#000',displayLoadingMsg:true,loadingMsg:'loading',loadingMsgFontSize:'12',loadingMsgFontColor:'#FFF',loadingMsgBgColor:'#900',loadingMsgPosition:'bottom',displayLoadingImg:false,loadingImgPosition:'center',loadingImgSrc:'images/loading.gif'},initialize:function(options){this.setOptions(options);this.body=$$('body').getFirst();this.dimensions=window.getSize();this.Elements=$$(this.options.link_class);this.Forms=$$(this.options.form_class);this.createElements();if(this.Elements){$each(this.Elements,function(el){var object=this;el.addEvent('click',function Events(event){event.preventDefault();object.injectEffect();if($defined(Browser.Engine.webkit)===false){var XHR=new Request.HTML({url:el.get('href'),method:'get',update:object.options.target,evalScripts:true,autoCancel:true,onComplete:function(){object.removeEffect()}}).send()}else{var XHR=new Request({url:el.get('href'),method:'get',evalScripts:true,autoCancel:true,onSuccess:function(response){$(object.options.target).set('html',response);object.removeEffect()}}).send()}},this)},this)}if(this.Forms){$each(this.Forms,function(el){var object=this;el.addEvent('submit',function Events(event){event.preventDefault();object.injectEffect();if($defined(Browser.Engine.webkit)===false){var XHR=new Request.HTML({url:el.get('href'),method:'get',update:object.options.target,evalScripts:true,autoCancel:true,onComplete:function(){object.removeEffect()}}).post(el)}else{var XHR=new Request({url:el.get('href'),method:'get',evalScripts:true,autoCancel:true,onSuccess:function(response){$(object.options.target).set('html',response);object.removeEffect()}}).post(el)}},this)},this)}},createElements:function(){if(this.options.displayLoadingMsg){this.Message=new Element('div',{styles:{'position':'fixed','display':'block','left':'0px','background':this.options.loadingMsgBgColor,'opacity':this.options.opacity,'width':'100%','height':22,'line-height':22,'text-align':'center','font-size':this.options.loadingMsgFontSize,'letter-spacing':1,'color':this.options.loadingMsgFontColor,'font-family':'Arial, Helvetica','font-variant':'small-caps','zindex':'1000'}});switch(this.options.loadingMsgPosition){case'top':this.Message.setStyle('top',0);break;case'bottom':this.Message.setStyle('bottom',0);break}this.Message.appendText(this.options.loadingMsg)}if(this.options.displayOverlay){this.Overlay=new Element('div',{styles:{'display':'block','background':this.options.overlayColor,'opacity':this.options.opacity,'width':'100%','height':'100%','position':'absolute','top':'0px','left':'0px','zindex':'1000'}})}if(this.options.displayLoadingImg){this.Animation=new Element('img',{styles:{'position':'absolute','zindex':'1001'},src:this.options.loadingImgSrc});switch(this.options.loadingImgPosition){case'top-left':this.Animation.setStyles({'top':'10px','left':'10px'});break;case'top-right':this.Animation.setStyles({'top':'10px','right':'10px'});break;case'center':this.Animation.setStyles({'top':(this.dimensions.y/2)+'px','left':(this.dimensions.x/2)+'px'});break;case'bottom-left':this.Animation.setStyles({'bottom':'10px','left':'10px'});break;case'bottom-right':this.Animation.setStyles({'bottom':'10px','right':'10px'});break}}},injectEffect:function(){if(this.options.displayOverlay){this.Overlay.inject($(this.options.target).getParent())}if(this.options.displayLoadingImg){this.Animation.inject($(this.options.target).getParent())}if(this.options.displayLoadingMsg){this.Message.inject($(this.options.target).getParent())}},removeEffect:function(){if(this.options.displayOverlay){this.Overlay.dispose()}if(this.options.displayLoadingImg){this.Animation.dispose()}if(this.options.displayLoadingMsg){this.Message.dispose()}}});

//========================================================================
//Check all boxes listener
//========================================================================
var checkAll={initialize:function(target,path){var e=$(target);if(e){e.addEvent('click',function(){if(e.get('rel')=='yes'){do_check=false;$('ucuc').set('src',path+'/uncheck.jpg').set('rel','no')}else{do_check=true;e.set('src',path+'/check.jpg').set('rel','yes')}$$('.checkbox').each(function(el){el.checked=do_check})})}}}

//========================================================================
//Highlight elements with .highlight CSS class listener
//========================================================================
var highlightListener=new Class({Implements:[Options],options:{classname:'highlight',color:'#FF9'},initialize:function(options){this.setOptions(options);this.elements=$$("."+this.options.classname);if(this.elements){this.elements.highlight(this.options.color)}}});


//========================================================================
//Fancy Display Messages
//========================================================================
var DisplayMessage=new Class({Implements:[Options],options:{element:'',highlight:false,pulse:false,vanish:false,delay:0,duration:500,fadeto:0,highlightWidth:2},initialize:function(options){this.setOptions(options);this.Element=$$(this.options.element);if(this.Element){if(this.options.highlight==true){this.highlight(this.Element)}if(this.options.pulse==true){this.pulse.pass(this.Element);this.pulse.periodical((this.options.duration*2),this,this.Element)}if(this.options.vanish==true){this.vanish.pass([this.Element],this).delay(this.options.delay)}}},highlight:function(target){var curBorder=target.getStyle('border-width').toString().slice(0,1).toInt();target.morph({'border-width':[(curBorder+this.options.highlightWidth),curBorder],'opacity':[this.options.fadeto,1]})},pulse:function(target){target.set('morph',{duration:this.options.duration});if(target.getStyle('opacity')==1){target.morph({'opacity':[this.options.fadeto]})}else{target.morph({'opacity':[1]})}},vanish:function(target){target.set('morph',{duration:this.options.duration});target.morph({'opacity':[0],'margin':[0],'padding':[0],'height':[0]})}});

//========================================================================
//slimbox v1.64
//========================================================================
var Slimbox;(function(){var G=0,F,L,B,S,T,O,E,M,J=new Image(),K=new Image(),X,a,P,H,W,Z,I,Y,C;window.addEvent("domready",function(){$(document.body).adopt($$([X=new Element("div",{id:"lbOverlay"}).addEvent("click",N),a=new Element("div",{id:"lbCenter"}),Z=new Element("div",{id:"lbBottomContainer"})]).setStyle("display","none"));P=new Element("div",{id:"lbImage"}).injectInside(a).adopt(H=new Element("a",{id:"lbPrevLink",href:"#"}).addEvent("click",D),W=new Element("a",{id:"lbNextLink",href:"#"}).addEvent("click",R));I=new Element("div",{id:"lbBottom"}).injectInside(Z).adopt(new Element("a",{id:"lbCloseLink",href:"#"}).addEvent("click",N),Y=new Element("div",{id:"lbCaption"}),C=new Element("div",{id:"lbNumber"}),new Element("div",{styles:{clear:"both"}}));E={overlay:new Fx.Tween(X,{property:"opacity",duration:500}).set(0),image:new Fx.Tween(P,{property:"opacity",duration:500,onComplete:A}),bottom:new Fx.Tween(I,{property:"margin-top",duration:400})}});Slimbox={open:function(e,d,c){F=$extend({loop:false,overlayOpacity:0.8,resizeDuration:400,resizeTransition:false,initialWidth:250,initialHeight:250,animateCaption:true,showCounter:true,counterText:"Image {x} of {y}"},c||{});if(typeof e=="string"){e=[[e,d]];d=0}L=e;F.loop=F.loop&&(L.length>1);b();Q(true);O=window.getScrollTop()+(window.getHeight()/15);E.resize=new Fx.Morph(a,$extend({duration:F.resizeDuration,onComplete:A},F.resizeTransition?{transition:F.resizeTransition}:{}));a.setStyles({top:O,width:F.initialWidth,height:F.initialHeight,marginLeft:-(F.initialWidth/2),display:""});E.overlay.start(F.overlayOpacity);G=1;return U(d)}};Element.implement({slimbox:function(c,d){$$(this).slimbox(c,d);return this}});Elements.implement({slimbox:function(c,f,e){f=f||function(g){return[g.href,g.title]};e=e||function(){return true};var d=this;d.removeEvents("click").addEvent("click",function(){var g=d.filter(e,this);return Slimbox.open(g.map(f),g.indexOf(this),c)});return d}});function b(){X.setStyles({top:window.getScrollTop(),height:window.getHeight()})}function Q(c){["object",window.ie?"select":"embed"].forEach(function(e){Array.forEach(document.getElementsByTagName(e),function(f){if(c){f._slimbox=f.style.visibility}f.style.visibility=c?"hidden":f._slimbox})});X.style.display=c?"":"none";var d=c?"addEvent":"removeEvent";window[d]("scroll",b)[d]("resize",b);document[d]("keydown",V)}function V(c){switch(c.code){case 27:case 88:case 67:N();break;case 37:case 80:D();break;case 39:case 78:R()}return false}function D(){return U(S)}function R(){return U(T)}function U(c){if((G==1)&&(c>=0)){G=2;B=c;S=((B||!F.loop)?B:L.length)-1;T=B+1;if(T==L.length){T=F.loop?0:-1}$$(H,W,P,Z).setStyle("display","none");E.bottom.cancel().set(0);E.image.set(0);a.className="lbLoading";M=new Image();M.onload=A;M.src=L[c][0]}return false}function A(){switch(G++){case 2:a.className="";P.setStyles({backgroundImage:"url("+L[B][0]+")",display:""});$$(P,I).setStyle("width",M.width);$$(P,H,W).setStyle("height",M.height);Y.set("html",L[B][1]||"");C.set("html",(F.showCounter&&(L.length>1))?F.counterText.replace(/{x}/,B+1).replace(/{y}/,L.length):"");if(S>=0){J.src=L[S][0]}if(T>=0){K.src=L[T][0]}if(a.clientHeight!=P.offsetHeight){E.resize.start({height:P.offsetHeight});break}G++;case 3:if(a.clientWidth!=P.offsetWidth){E.resize.start({width:P.offsetWidth,marginLeft:-P.offsetWidth/2});break}G++;case 4:Z.setStyles({top:O+a.clientHeight,marginLeft:a.style.marginLeft,visibility:"hidden",display:""});E.image.start(1);break;case 5:if(S>=0){H.style.display=""}if(T>=0){W.style.display=""}if(F.animateCaption){E.bottom.set(-I.offsetHeight).start(0)}Z.style.visibility="";G=1}}function N(){if(G){G=0;M.onload=$empty;for(var c in E){E[c].cancel()}$$(a,Z).setStyle("display","none");E.overlay.chain(Q).start(0)}return false}})();